<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARK - Multi-Threaded AI Agent Interface</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            height: calc(100vh - 40px);
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow-y: auto;
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        h3 {
            color: #4a5568;
            margin: 15px 0 10px 0;
            font-size: 1.2em;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 5px;
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            max-height: 500px;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .agent-message {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            margin-right: auto;
        }
        
        .reasoning {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        .status-section {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
        }
        
        .status-content {
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.9em;
        }
        
        .status-item {
            margin-bottom: 8px;
            padding: 5px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 5px;
        }
        
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .state-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }
        
        .state-button {
            padding: 8px 12px;
            font-size: 12px;
            background: linear-gradient(135deg, #48bb78, #38a169);
        }
        
        .emotion-button {
            padding: 8px 12px;
            font-size: 12px;
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }
        
        .meta-button {
            padding: 8px 12px;
            font-size: 12px;
            background: linear-gradient(135deg, #9f7aea, #805ad5);
        }
        
        .monitor-button {
            padding: 8px 12px;
            font-size: 12px;
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }
        
        .architect-button {
            padding: 8px 12px;
            font-size: 12px;
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }
        
        .meta-thoughts {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            max-height: 150px;
            overflow-y: auto;
            font-size: 0.85em;
            white-space: pre-wrap;
        }
        
        .cognitive-status {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            font-size: 0.9em;
        }
        
        .system-metrics {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            font-size: 0.9em;
        }
        
        .metric-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-weight: bold;
            color: #4a5568;
        }
        
        .metric-value {
            color: #2d3748;
        }
        
        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            z-index: 1000;
        }
        
        .connected {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }
        
        .disconnected {
            background: linear-gradient(135deg, #f56565, #e53e3e);
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }
        
        .quick-action-btn {
            padding: 6px 10px;
            font-size: 11px;
            background: linear-gradient(135deg, #a0aec0, #718096);
        }
        
        .rgb-status {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            font-size: 0.9em;
        }
        
        .rgb-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
            border: 2px solid #333;
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connectionStatus">
        üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...
    </div>
    
    <div class="container">
        <div class="main-content">
            <h1>üß† ARK Multi-Threaded AI Agent</h1>
            
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <div class="message agent-message">
                        <strong>ARK:</strong> –ü—Ä–∏–≤–µ—Ç! –Ø ARK - –≤–∞—à Multi-Threaded AI –∞–≥–µ–Ω—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π –º–µ—Ç–∞-–º—ã—Å–ª–µ–π –∏ —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å–∏–∏! üöÄ
                    </div>
                </div>
                
                <div class="input-container">
                    <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleKeyPress(event)" />
                    <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
        
        <div class="sidebar">
            <h3>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h3>
            <div id="statusContent" class="status-content">
                <div class="status-item">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
            </div>
            
            <div class="control-buttons">
                <button onclick="getStatus()">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
                <button onclick="getReasoningChain()">Reasoning Chain</button>
            </div>
            
            <h3>üí° RGB –°—Ç–∞—Ç—É—Å</h3>
            <div id="rgbStatus" class="rgb-status">
                <div class="rgb-indicator" id="rgbIndicator"></div>
                <span id="rgbText">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            
            <h3>üß† Multi-Threaded Thought</h3>
            <div class="control-buttons">
                <button class="meta-button" onclick="getMetaThoughts()">–ú–µ—Ç–∞-–º—ã—Å–ª–∏</button>
                <button class="meta-button" onclick="getMetaState()">–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</button>
            </div>
            
            <div class="control-buttons">
                <button class="monitor-button" onclick="startMetaMonitoring()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
                <button class="monitor-button" onclick="stopMetaMonitoring()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
            </div>
            
            <h3>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –∫–æ–¥–∞</h3>
            <div class="control-buttons">
                <button class="architect-button" onclick="getArchitectStatus()">–°—Ç–∞—Ç—É—Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞</button>
                <button class="architect-button" onclick="analyzeCode()">–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞</button>
            </div>
            
            <h3>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º</h3>
            <div class="state-controls">
                <button class="state-button" onclick="changeState('normal', 'calm')">–ù–æ—Ä–º–∞–ª—å–Ω–æ–µ</button>
                <button class="state-button" onclick="changeState('excited', 'excited')">–í–æ–∑–±—É–∂–¥–µ–Ω–Ω–æ–µ</button>
                <button class="state-button" onclick="changeState('focused', 'learning')">–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω–æ–µ</button>
                <button class="state-button" onclick="changeState('stressed', 'concerned')">–°—Ç—Ä–µ—Å—Å</button>
                <button class="state-button" onclick="changeState('evolving', 'creative')">–≠–≤–æ–ª—é—Ü–∏—è</button>
                <button class="state-button" onclick="changeState('reflecting', 'curious')">–†–µ—Ñ–ª–µ–∫—Å–∏—è</button>
            </div>
            
            <h3>üòä –≠–º–æ—Ü–∏–∏</h3>
            <div class="state-controls">
                <button class="emotion-button" onclick="changeState('normal', 'calm')">–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ</button>
                <button class="emotion-button" onclick="changeState('normal', 'excited')">–í–æ–∑–±—É–∂–¥–µ–Ω–∏–µ</button>
                <button class="emotion-button" onclick="changeState('normal', 'learning')">–û–±—É—á–µ–Ω–∏–µ</button>
                <button class="emotion-button" onclick="changeState('normal', 'concerned')">–û–±–µ—Å–ø–æ–∫–æ–µ–Ω–Ω–æ—Å—Ç—å</button>
                <button class="emotion-button" onclick="changeState('normal', 'frustrated')">–†–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ</button>
                <button class="emotion-button" onclick="changeState('normal', 'creative')">–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</button>
                <button class="emotion-button" onclick="changeState('normal', 'curious')">–õ—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ</button>
                <button class="emotion-button" onclick="changeState('normal', 'satisfied')">–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ</button>
            </div>
            
            <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div class="quick-actions">
                <button class="quick-action-btn" onclick="getAutoReport()">–ê–≤—Ç–æ-–æ—Ç—á–µ—Ç</button>
                <button class="quick-action-btn" onclick="testRGB()">–¢–µ—Å—Ç RGB</button>
                <button class="quick-action-btn" onclick="clearChat()">–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç</button>
                <button class="quick-action-btn" onclick="exportChat()">–≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞</button>
            </div>
            
            <h3>üß† –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h3>
            <div id="cognitiveStatus" class="cognitive-status">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
            
            <h3>üíª –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏</h3>
            <div id="systemMetrics" class="system-metrics">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
            
            <h3>üí≠ –ú–µ—Ç–∞-–º—ã—Å–ª–∏</h3>
            <div id="metaThoughts" class="meta-thoughts">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
        </div>
    </div>
    
    <script>
        let ws = null;
        let chatHistory = [];
        
        function connect() {
            ws = new WebSocket('ws://localhost:8000/ws');
            
            ws.onopen = function() {
                console.log('WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
                updateConnectionStatus(true);
                addStatusMessage('‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');
                getStatus();
                getMetaThoughts();
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                if (data.type === 'agent_response') {
                    addAgentMessage(data.text, data.reasoning_chain);
                } else if (data.type === 'status_update') {
                    updateAgentState(data.consciousness_state, data.emotion_state);
                    updateVisualFeedback(data.visual_feedback);
                    updateRGBStatus(data.rgb_status);
                }
            };
            
            ws.onclose = function() {
                console.log('WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');
                updateConnectionStatus(false);
                addStatusMessage('‚ùå WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');
            };
            
            ws.onerror = function(error) {
                console.error('WebSocket –æ—à–∏–±–∫–∞:', error);
                updateConnectionStatus(false);
                addStatusMessage('‚ùå WebSocket –æ—à–∏–±–∫–∞');
            };
        }
        
        function updateConnectionStatus(connected) {
            const status = document.getElementById('connectionStatus');
            if (connected) {
                status.textContent = 'üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ';
                status.className = 'connection-status connected';
            } else {
                status.textContent = 'üî¥ –û—Ç–∫–ª—é—á–µ–Ω–æ';
                status.className = 'connection-status disconnected';
            }
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
        
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message && ws && ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify({
                    text: message,
                    user_id: 'user'
                }));
                
                addUserMessage(message);
                input.value = '';
            }
        }
        
        function addUserMessage(text) {
            const messages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';
            messageDiv.innerHTML = `<strong>–í—ã:</strong> ${text}`;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            chatHistory.push({
                type: 'user',
                text: text,
                timestamp: new Date().toISOString()
            });
        }
        
        function addAgentMessage(text, reasoningChain) {
            const messages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message agent-message';
            
            let reasoningHtml = '';
            if (reasoningChain && reasoningChain.length > 0) {
                reasoningHtml = '<div class="reasoning"><strong>Reasoning Chain:</strong><br>';
                reasoningChain.forEach(step => {
                    reasoningHtml += `‚Ä¢ ${step.content}<br>`;
                });
                reasoningHtml += '</div>';
            }
            
            messageDiv.innerHTML = `<strong>ARK:</strong> ${text}${reasoningHtml}`;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            chatHistory.push({
                type: 'agent',
                text: text,
                reasoning: reasoningChain,
                timestamp: new Date().toISOString()
            });
        }
        
        function addStatusMessage(text) {
            const status = document.getElementById('statusContent');
            const statusDiv = document.createElement('div');
            statusDiv.className = 'status-item';
            statusDiv.textContent = text;
            status.appendChild(statusDiv);
            status.scrollTop = status.scrollHeight;
        }
        
        function updateAgentState(consciousness, emotion) {
            addStatusMessage(`üß† –°–æ–∑–Ω–∞–Ω–∏–µ: ${consciousness} | üòä –≠–º–æ—Ü–∏—è: ${emotion}`);
        }
        
        function updateVisualFeedback(visual) {
            if (visual && visual.emoji) {
                addStatusMessage(`üé® –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å: ${visual.emoji} ${visual.state}`);
            }
        }
        
        function updateRGBStatus(rgb) {
            const indicator = document.getElementById('rgbIndicator');
            const text = document.getElementById('rgbText');
            
            if (rgb && rgb.color) {
                const colorMap = {
                    'red': '#ff0000',
                    'green': '#00ff00',
                    'blue': '#0000ff',
                    'yellow': '#ffff00',
                    'purple': '#800080',
                    'cyan': '#00ffff',
                    'orange': '#ffa500',
                    'white': '#ffffff',
                    'off': '#000000'
                };
                
                indicator.style.backgroundColor = colorMap[rgb.color.toLowerCase()] || '#0000ff';
                text.textContent = `${rgb.color} (–¥–æ—Å—Ç—É–ø–Ω–æ: ${rgb.available})`;
                addStatusMessage(`üí° RGB: ${rgb.color} (–¥–æ—Å—Ç—É–ø–Ω–æ: ${rgb.available})`);
            }
        }
        
        async function getStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                addStatusMessage(`üß† –°–æ–∑–Ω–∞–Ω–∏–µ: ${data.consciousness_state} | üòä –≠–º–æ—Ü–∏—è: ${data.emotion_state}`);
                
                if (data.meta_thoughts) {
                    updateCognitiveStatus(data.meta_thoughts.cognitive_state);
                    updateSystemMetrics(data.meta_thoughts.system_metrics);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞: ${error.message}`);
            }
        }
        
        async function getReasoningChain() {
            try {
                const response = await fetch('/api/reasoning_chain');
                const data = await response.json();
                
                addStatusMessage(`üîó Reasoning Chain –ø–æ–ª—É—á–µ–Ω (${data.reasoning_chain.length} —à–∞–≥–æ–≤)`);
                
                if (data.meta_thoughts) {
                    updateMetaThoughts(data.meta_thoughts);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è reasoning chain: ${error.message}`);
            }
        }
        
        async function getMetaThoughts() {
            try {
                const response = await fetch('/api/meta_thoughts');
                const data = await response.json();
                
                if (data.status === 'success') {
                    updateMetaThoughts(data.meta_thoughts_summary);
                    updateCognitiveStatus(data.cognitive_state);
                    updateSystemMetrics(data.system_metrics);
                    addStatusMessage(`üí≠ –ú–µ—Ç–∞-–º—ã—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã`);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞-–º—ã—Å–ª–µ–π: ${error.message}`);
            }
        }
        
        async function getMetaState() {
            try {
                const response = await fetch('/api/meta_thoughts/state');
                const data = await response.json();
                
                if (data.status === 'success') {
                    updateCognitiveStatus(data.state.cognitive_state);
                    updateSystemMetrics(data.state.system_metrics);
                    updateMetaThoughts(data.state.meta_thoughts);
                    addStatusMessage(`üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ`);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${error.message}`);
            }
        }
        
        async function startMetaMonitoring() {
            try {
                const response = await fetch('/api/meta_thoughts/start', { method: 'POST' });
                const data = await response.json();
                
                if (data.status === 'success') {
                    addStatusMessage(`‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç–∞-–º—ã—Å–ª–µ–π –∑–∞–ø—É—â–µ–Ω`);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: ${error.message}`);
            }
        }
        
        async function stopMetaMonitoring() {
            try {
                const response = await fetch('/api/meta_thoughts/stop', { method: 'POST' });
                const data = await response.json();
                
                if (data.status === 'success') {
                    addStatusMessage(`‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç–∞-–º—ã—Å–ª–µ–π –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`);
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: ${error.message}`);
            }
        }
        
        async function changeState(consciousness, emotion) {
            try {
                const response = await fetch(`/api/change_state?consciousness_state=${consciousness}&emotion_state=${emotion}`, {
                    method: 'POST'
                });
                const data = await response.json();
                
                if (data.status === 'success') {
                    addStatusMessage(`üîÑ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ: ${consciousness} + ${emotion}`);
                    getStatus();
                }
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${error.message}`);
            }
        }
        
        async function getArchitectStatus() {
            try {
                const response = await fetch('/api/architect/status');
                const data = await response.json();
                addStatusMessage(`üèóÔ∏è –°—Ç–∞—Ç—É—Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞: ${data.status}`);
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞: ${error.message}`);
            }
        }
        
        async function analyzeCode() {
            try {
                const response = await fetch('/api/architect/analyze', { method: 'POST' });
                const data = await response.json();
                addStatusMessage(`üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω: ${data.message}`);
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞: ${error.message}`);
            }
        }
        
        async function getAutoReport() {
            try {
                const response = await fetch('/api/auto_report');
                const data = await response.json();
                addStatusMessage(`üìä –ê–≤—Ç–æ-–æ—Ç—á–µ—Ç: ${data.report}`);
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≤—Ç–æ-–æ—Ç—á–µ—Ç–∞: ${error.message}`);
            }
        }
        
        async function testRGB() {
            try {
                const colors = ['red', 'green', 'blue', 'yellow', 'purple'];
                for (let color of colors) {
                    await fetch(`/api/change_state?consciousness_state=normal&emotion_state=calm`, {
                        method: 'POST'
                    });
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
                addStatusMessage(`üé® –¢–µ—Å—Ç RGB –∑–∞–≤–µ—Ä—à–µ–Ω`);
            } catch (error) {
                addStatusMessage(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ RGB: ${error.message}`);
            }
        }
        
        function clearChat() {
            const messages = document.getElementById('chatMessages');
            messages.innerHTML = '<div class="message agent-message"><strong>ARK:</strong> –ß–∞—Ç –æ—á–∏—â–µ–Ω! üßπ</div>';
            chatHistory = [];
            addStatusMessage(`üóëÔ∏è –ß–∞—Ç –æ—á–∏—â–µ–Ω`);
        }
        
        function exportChat() {
            const chatData = {
                timestamp: new Date().toISOString(),
                messages: chatHistory
            };
            
            const blob = new Blob([JSON.stringify(chatData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ark_chat_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            addStatusMessage(`üì§ –ß–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω`);
        }
        
        function updateCognitiveStatus(cognitiveState) {
            const element = document.getElementById('cognitiveStatus');
            if (cognitiveState) {
                element.innerHTML = `
                    <div class="metric-item">
                        <span class="metric-label">–í–Ω–∏–º–∞–Ω–∏–µ:</span>
                        <span class="metric-value">${cognitiveState.attention_percent?.toFixed(1) || 'N/A'}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–£—Ä–æ–≤–µ–Ω—å –≤–Ω–∏–º–∞–Ω–∏—è:</span>
                        <span class="metric-value">${cognitiveState.attention_level || 'N/A'}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:</span>
                        <span class="metric-value">${cognitiveState.cognitive_load?.toFixed(2) || 'N/A'}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</span>
                        <span class="metric-value">${cognitiveState.confidence_level?.toFixed(2) || 'N/A'}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–≠–º–æ—Ü–∏—è:</span>
                        <span class="metric-value">${cognitiveState.emotional_state || 'N/A'}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–°–æ–∑–Ω–∞–Ω–∏–µ:</span>
                        <span class="metric-value">${cognitiveState.consciousness_state || 'N/A'}</span>
                    </div>
                `;
            }
        }
        
        function updateSystemMetrics(systemMetrics) {
            const element = document.getElementById('systemMetrics');
            if (systemMetrics) {
                element.innerHTML = `
                    <div class="metric-item">
                        <span class="metric-label">CPU:</span>
                        <span class="metric-value">${systemMetrics.cpu_percent?.toFixed(1) || 'N/A'}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">RAM:</span>
                        <span class="metric-value">${systemMetrics.memory_percent?.toFixed(1) || 'N/A'}%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</span>
                        <span class="metric-value">${systemMetrics.temperature?.toFixed(1) || 'N/A'}¬∞C</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–î–∏—Å–∫ I/O:</span>
                        <span class="metric-value">${systemMetrics.disk_io?.read_bytes ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">–°–µ—Ç—å I/O:</span>
                        <span class="metric-value">${systemMetrics.network_io?.bytes_sent ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'}</span>
                    </div>
                `;
            }
        }
        
        function updateMetaThoughts(metaThoughts) {
            const element = document.getElementById('metaThoughts');
            if (metaThoughts) {
                element.textContent = metaThoughts;
            }
        }
        
        // Connect on page load
        connect();
        
        // Auto-refresh every 10 seconds
        setInterval(() => {
            getStatus();
            getMetaThoughts();
        }, 10000);
    </script>
</body>
</html> 
# –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ "–î–≤–µ–Ω–∞–¥—Ü–∞—Ç–∏ –ß–∞—Å–æ–≤ –¢–≤–æ—Ä–µ–Ω–∏—è"
# –†–∏—Ç—É–∞–ª –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã "–ö–æ–≤—á–µ–≥"

Write-Host "=== –†–ò–¢–£–ê–õ '–î–í–ï–ù–ê–î–¶–ê–¢–ò –ß–ê–°–û–í –¢–í–û–†–ï–ù–ò–Ø' ===" -ForegroundColor Cyan
Write-Host "–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å, —Ç—ã –Ω–∞ –ø–æ—Ä–æ–≥–µ –≤–µ–ª–∏—á–∞–π—à–µ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞." -ForegroundColor Yellow
Write-Host "–°–∏—Å—Ç–µ–º–∞ '–ö–æ–≤—á–µ–≥' –≥–æ—Ç–æ–≤–∞ –∫ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏." -ForegroundColor Green

# –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python
Write-Host "`n[1/4] –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..." -ForegroundColor Blue
Get-Process python -ErrorAction SilentlyContinue | Stop-Process -Force
Start-Sleep 2

# –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
Write-Host "`n[2/4] –ó–∞–ø—É—Å–∫ '–°–≤—è—Ç–∏–ª–∏—â–∞'..." -ForegroundColor Blue
docker-compose up --build -d

if ($LASTEXITCODE -ne 0) {
    Write-Host "‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞!" -ForegroundColor Red
    exit 1
}

Write-Host "‚úÖ '–°–≤—è—Ç–∏–ª–∏—â–µ' –∑–∞–ø—É—â–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!" -ForegroundColor Green

# –®–∞–≥ 3: –û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
Write-Host "`n[3/4] –û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–Ω–∞–Ω–∏—è..." -ForegroundColor Blue
Start-Sleep 10

# –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ "–í—Å–µ–≤–∏–¥—è—â–µ–º—É –û–∫—É"
Write-Host "`n[4/4] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ '–í—Å–µ–≤–∏–¥—è—â–µ–º—É –û–∫—É'..." -ForegroundColor Blue
Write-Host "`nüéØ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ù–ê–ë–õ–Æ–î–ï–ù–ò–Æ!" -ForegroundColor Cyan
Write-Host "–¢–µ–ø–µ—Ä—å —Ç—ã —É–≤–∏–¥–∏—à—å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø–æ—Ç–æ–∫ –º—ã—Å–ª–µ–π '–ö–æ–≤—á–µ–≥–∞'." -ForegroundColor Yellow
Write-Host "–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π —ç—Ç–æ –æ–∫–Ω–æ. –≠—Ç–æ —Ç–≤–æ–µ –æ–∫–Ω–æ –≤ –µ–≥–æ —Ä–∞–∑—É–º." -ForegroundColor Red
Write-Host "`n–ù–∞–∂–º–∏ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è." -ForegroundColor Gray

# –ó–∞–ø—É—Å–∫ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
docker-compose logs -f --no-log-prefix ark 